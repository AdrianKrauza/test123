"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{6550:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(5893),o=n(4942),c=n(2693),a=n(7294),i=n(5948),s=n(6486),u=n.n(s),p=n(8172),l=n(5152),f=n(1451),d=n(4855),b=n(3802);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O="w-8 h-8 pointer",j=function(e,t,n,o){var c=e.__component+e.id,a=function(){var t=u().assign({},e);return u().unset(t,"id"),JSON.stringify(t)}();return(0,r.jsx)(i._l,{draggableId:c,index:t,children:function(t){return(0,r.jsx)("div",m(m(m({className:"editorPanel",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:(0,r.jsxs)("div",{className:"flex text-gray-800 text-xl p-1 align-center justify-between pl-".concat(n%2*3," "),children:[e.__component,(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(b.NAN,{onClick:function(){return function(e){o((function(t){var n=(0,f.Z)(t.pageBuilder),r=u().assign({},e);return u().unset(r,"id"),console.log(r),n.push(r),m(m({},t),{},{pageBuilder:n})}))}(e)},className:O}),(0,r.jsx)(d.CopyToClipboard,{text:a,children:(0,r.jsx)(b.dqY,{className:O})}),(0,r.jsx)(b.XHJ,{onClick:function(){return function(e){o((function(t){var n=(0,f.Z)(t.pageBuilder);return u().remove(n,(function(t){return u().isEqual(t,e)})),m(m({},t),{},{pageBuilder:n})}))}(e)},className:O})]})]})}))}},c)};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=(0,l.default)((function(){return n.e(599).then(n.bind(n,1599))}),{loadableGenerated:{webpack:function(){return[1599]},modules:["..\\components\\pageEditor\\componentsPanel\\componentsPanel.js -> @/pageEditor/addComponents/addComponents"]}}),x=(0,p.ZP)((function(e,t){switch(t.type){case"MOVE":e[t.from]=e[t.from]||[],e[t.to]=e[t.to]||[];var n=e[t.from].splice(t.fromIndex,1),r=(0,c.Z)(n,1)[0];e[t.to].splice(t.toIndex,0,r);break;case"RESTART":u().reduce(u().values(t.state).flat(),(function(t,n,r){var o=(0,c.Z)(t,2),a=o[0],i=o[1];return"page-builder.row-with-image-start"===n.__component&&(a+=1,i+=1),"page-builder.row-with-image-end"===n.__component&&(a-=1),"page-builder.row-with-image-start"!==n.__component&&r||(e["components".concat(i)]=[]),e["components".concat(i)].push(n),[a,i]}),[0,0])}})),P=function(e){var t=e.pageData,n=e.setPageData,o=(0,a.useState)(!1),c=o[0],s=o[1],u=(0,a.useState)(!1),p=u[0],l=u[1],f=(0,a.useReducer)(x,{}),d=f[0],b=f[1],g=(0,a.useCallback)((function(e){if("DROP"===e.reason){if(!e.destination)return;b({type:"MOVE",from:e.source.droppableId,to:e.destination.droppableId,fromIndex:e.source.index,toIndex:e.destination.index,state:d}),s(!0)}}),[]);return(0,a.useEffect)((function(){l(!1),b({type:"RESTART",state:t.pageBuilder})}),[t]),(0,a.useEffect)((function(){c&&(s(!1),b({type:"RESTART",state:d})),p?n((function(e){return h(h({},e),{},{pageBuilder:Object.entries(d).map((function(e){return e[1]})).flat()})})):l(!0)}),[d]),(0,i.sO)(),(0,r.jsxs)("div",{className:"max-w-sm p-5   bg-white h-screen fixed w-full z-30",children:[(0,r.jsx)(i.Z5,{className:"overflow-y-scroll",onDragEnd:g,children:d&&Object.entries(d).map((function(e,t){return(0,r.jsx)(i.bK,{droppableId:e[0],type:"PERSON",children:function(o){return(0,r.jsxs)("div",h(h({ref:o.innerRef},o.droppableProps),{},{children:[e[1].map((function(e,r){return j(e,r,t,n)})),o.placeholder]}))}})}))}),(0,r.jsx)(w,h({},{pageData:t,setPageData:n}))]})}}}]);